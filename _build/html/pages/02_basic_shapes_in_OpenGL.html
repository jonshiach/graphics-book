

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>2. Basic Shapes in OpenGL &#8212; Computer Graphics Labs</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'pages/02_basic_shapes_in_OpenGL';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3. Textures" href="03_textures.html" />
    <link rel="prev" title="1. Introduction to C++" href="01_intro_to_cpp.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.svg" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/logo.svg" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Computer Graphics
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="01_intro_to_cpp.html">1. Introduction to C++</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">2. Basic Shapes in OpenGL</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_textures.html">3. Textures</a></li>
<li class="toctree-l1"><a class="reference internal" href="04_vectors_and_matrices.html">4. Vectors and Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="05_transformations.html">5. Transformations</a></li>
<li class="toctree-l1"><a class="reference internal" href="06_3D_worlds.html">6. 3D Worlds</a></li>
<li class="toctree-l1"><a class="reference internal" href="07_Moving_the_camera.html">7. Moving the camera</a></li>
<li class="toctree-l1"><a class="reference internal" href="08_Lighting.html">8. Lighting</a></li>
<li class="toctree-l1"><a class="reference internal" href="09_Normal_mapping.html">9. Normal Mapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="10_Quaternions.html">10. Quaternions</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="A_Complex_numbers_and_quaternions.html">A. Complex Numbers and Quaternions</a></li>
<li class="toctree-l1"><a class="reference internal" href="B_Code.html">B. Code and Assets</a></li>
<li class="toctree-l1"><a class="reference internal" href="C_Glossary.html">C Glossary</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/jonshiach/graphics-labs" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/jonshiach/graphics-labs/issues/new?title=Issue%20on%20page%20%2Fpages/02_basic_shapes_in_OpenGL.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/pages/02_basic_shapes_in_OpenGL.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Basic Shapes in OpenGL</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hello-window">2.1. Hello window</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#define-a-triangle">2.2. Define a triangle</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#write-and-compile-the-shader">2.3. Write and compile the shader</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#vertex-shader">2.3.1. Vertex shader</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fragment-shader">2.3.2. Fragment shader</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#shader-program">2.3.3. Shader program</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#draw-the-triangle">2.4. Draw the triangle</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#more-colours">2.5. More colours</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-another-triangle">2.6. Adding another triangle</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercises">2.7. Exercises</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#source-code">2.8. Source code</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#video-walkthrough">2.9. Video walkthrough</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="basic-shapes-in-opengl">
<span id="hello-triangle-section"></span><h1><span class="section-number">2. </span>Basic Shapes in OpenGL<a class="headerlink" href="#basic-shapes-in-opengl" title="Permalink to this heading">#</a></h1>
<p>In this lab we will be creating our first graphics application in OpenGL.</p>
<section id="hello-window">
<span id="hello-window-section"></span><h2><span class="section-number">2.1. </span>Hello window<a class="headerlink" href="#hello-window" title="Permalink to this heading">#</a></h2>
<p>To start using OpenGL we are going to have to download and compile several libraries and configure the IDE (we will be using Visual Studio on Windows). This can be quite an involved process (see <a href="https://learnopengl.com/Getting-started/Creating-a-window" target="_blank">Learn OpenGL</a> for a detailed tutorial on doing this). However, I have adapted the excellent resource <a href="https://www.opengl-tutorial.org/" target="_blank">opengl-tutorial.org</a> to do this for us.</p>
<ol class="arabic simple">
<li><p>Go to <a href="https://github.com/jonshiach/Lab02_Basic_shapes" target="_blank">https://github.com/jonshiach/Lab02_Basic_shapes</a> and follow the instructions to download and build the project files.</p></li>
<li><p>Open the project file <code class="docutils literal notranslate"><span class="pre">Lab02_Basic_shapes.sln</span></code> (or <code class="docutils literal notranslate"><span class="pre">Lab02_Basic_shapes.xcodeproj</span></code> on macOS) set the <strong>Lab02_Basic_shapes</strong> project as the startup project.</p>
<ul class="simple">
<li><p>Visual Studio: right-click on the <strong>Lab02_Basic_shapes</strong> project and select <strong>Set as Startup Project</strong>.</p></li>
<li><p>Xcode: Click on the target select dropdown (to the right of the name of the project at the top of the window) and select <strong>Lab02_Basic_shapes</strong> as the target.</p></li>
</ul>
</li>
<li><p>Build the project by pressing CTRL + B (or ⌘B on Xcode) which should build the project without errors. Run the executable by pressing F5 (or ⌘R on Xcode).</p></li>
</ol>
<p>If all has gone to plan you should be looking at a boring window with a grey background. Familiarise yourself with the source files. For now, this contains the main C++ program <code class="docutils literal notranslate"><span class="pre">main.cpp</span></code>, the header file <code class="docutils literal notranslate"><span class="pre">shader.hpp</span></code> and associated code file <code class="docutils literal notranslate"><span class="pre">shader.cpp</span></code> in the <code class="docutils literal notranslate"><span class="pre">source/</span></code> folder.</p>
<figure class="align-default" id="id1">
<a class="reference internal image-reference" href="../_images/02_hello_window.png"><img alt="../_images/02_hello_window.png" src="../_images/02_hello_window.png" style="width: 500px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 2.1 </span><span class="caption-text">The “hello window” example (boring isn’t it)</span><a class="headerlink" href="#id1" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>You can terminate your application by pressing the escape key or simply closing the window.</p>
</section>
<hr class="docutils" />
<section id="define-a-triangle">
<h2><span class="section-number">2.2. </span>Define a triangle<a class="headerlink" href="#define-a-triangle" title="Permalink to this heading">#</a></h2>
<p>As you will probably agree, creating a plain grey window isn’t the most interesting of applications. What would make it much more exciting is to draw simple shapes in the window. The simplest shape, and one which we use extensively in computer graphics, is a triangle.</p>
<p>The first thing we need to do is create the <a href="https://www.khronos.org/opengl/wiki/Vertex_Specification#Vertex_Array_Object" target="_blank"><strong>Vertex Array Object (VAO)</strong></a> which is a container for the vertex attributes and associated vertex data (e.g., the vertex co-ordinates, colour, texture, normal vectors etc.) and bind it so that OpenGL knows that this is the current object it is dealing with. Enter the following into your <code class="docutils literal notranslate"><span class="pre">main.cpp</span></code> file before the do/while loop.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Create the Vertex Array Object (VAO)</span>
<span class="n">GLuint</span><span class="w"> </span><span class="n">VAO</span><span class="p">;</span>
<span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">VAO</span><span class="p">);</span>
<span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">VAO</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Here we have defined the integer <code class="docutils literal notranslate"><span class="pre">VAO</span></code> using <code class="docutils literal notranslate"><span class="pre">GLunit</span></code> instead of plain old <code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span></code>. <code class="docutils literal notranslate"><span class="pre">GLuint</span></code> stands for <a href="https://www.khronos.org/opengl/wiki/OpenGL_Type" target="_blank"><strong>OpenGL unsigned integer</strong></a> and we use this because different architectures stores variables using different memory sizes. In order to ensure our application works across various platforms we use OpenGL types.</p>
</div>
<p>OpenGL expects the x, y and z co-ordinates of all vertices to be between -1.0 and 1.0 where the x and y axes point to the right and up respectively and the z axes points out from the screen (these are known as <strong>Normalised Device Co-ordinates (NDC)</strong> - more on this later). For now we are going to draw a triangle with vertex co-ordinates (-0.5,-0.5,0), (0.5,-0.5,0) and (0,0.5,0) for the bottom-left, bottom-right and top vertices respectively.</p>
<figure class="align-default" id="id2">
<a class="reference internal image-reference" href="../_images/02_opengl_window.svg"><img alt="../_images/02_opengl_window.svg" src="../_images/02_opengl_window.svg" width="400" /></a>
<figcaption>
<p><span class="caption-number">Fig. 2.2 </span><span class="caption-text">OpenGL Normalised Device Co-ordinates are in the range -1 to 1.</span><a class="headerlink" href="#id2" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>We define these co-ordinates in an array of floats called <code class="docutils literal notranslate"><span class="pre">vertices</span></code> using the following code.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define vertex positions</span>
<span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">GLfloat</span><span class="w"> </span><span class="n">vertices</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// x     y      z</span>
<span class="w">    </span><span class="mf">-0.5f</span><span class="p">,</span><span class="w"> </span><span class="mf">-0.5f</span><span class="p">,</span><span class="w">  </span><span class="mf">0.0f</span><span class="p">,</span>
<span class="w">     </span><span class="mf">0.5f</span><span class="p">,</span><span class="w"> </span><span class="mf">-0.5f</span><span class="p">,</span><span class="w">  </span><span class="mf">0.0f</span><span class="p">,</span>
<span class="w">     </span><span class="mf">0.0f</span><span class="p">,</span><span class="w">  </span><span class="mf">0.5f</span><span class="p">,</span><span class="w">  </span><span class="mf">0.0f</span>
<span class="p">};</span>
</pre></div>
</div>
<p id="vbo-section">We now need to define a <a href="https://www.khronos.org/opengl/wiki/Vertex_Specification#Vertex_Buffer_Object" target="_blank"><strong>Vertex Buffer Object (VBO)</strong></a> which is how we transfer the vertex data from the CPU to the GPU.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Create Vertex Buffer Object (VBO)</span>
<span class="n">GLuint</span><span class="w"> </span><span class="n">vertexBuffer</span><span class="p">;</span>
<span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">vertexBuffer</span><span class="p">);</span>
<span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span><span class="w"> </span><span class="n">vertexBuffer</span><span class="p">);</span>
<span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">vertices</span><span class="p">),</span><span class="w"> </span><span class="n">vertices</span><span class="p">,</span><span class="w"> </span><span class="n">GL_STATIC_DRAW</span><span class="p">);</span>
</pre></div>
</div>
<p>Here, after creating and binding the vertex buffer we copy across the co-ordinates stored in the <code class="docutils literal notranslate"><span class="pre">vertices</span></code> array to the vertex buffer using the <code class="docutils literal notranslate"><span class="pre">glBufferData()</span></code> function.</p>
</section>
<hr class="docutils" />
<section id="write-and-compile-the-shader">
<h2><span class="section-number">2.3. </span>Write and compile the shader<a class="headerlink" href="#write-and-compile-the-shader" title="Permalink to this heading">#</a></h2>
<p>Now we have defined our triangle and copied the information over to OpenGL we now need to tell OpenGL how to display the triangle. This is done using a shader program that OpenGL uses to tell it how to display each pixel in our window. The shader programs are written in <a href="https://www.khronos.org/opengl/wiki/Core_Language_(GLSL)" target="_blank"><strong>GLSL (OpenGL Shader Language)</strong></a> which is a language similar to C.</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/02_shaders.svg"><img alt="../_images/02_shaders.svg" src="../_images/02_shaders.svg" width="600" /></a>
</figure>
<p>At its most basic it consists of a <a href="https://www.khronos.org/opengl/wiki/Vertex_Shader" target="_blank"><strong>vertex shader</strong></a> and a <a href="https://www.khronos.org/opengl/wiki/Fragment_Shader" target="_blank"><strong>fragment shader</strong></a>. The vertex shader is called once for each vertex and calculates the position of the current vertex and stores it in a special GLSL vector <code class="docutils literal notranslate"><span class="pre">gl_Position</span></code>. The vertices that form a polygon are then passed to OpenGL which maps the polygon to the corresponding pixels on the display. A <strong>fragment</strong> is a data structure that represents a potential pixel on the display. The fragment shader is called once for each pixel in the fragment and determines the colour of that pixel.</p>
<p>The shaders are compiled by the application at runtime.</p>
<section id="vertex-shader">
<span id="vertex-shader-section"></span><h3><span class="section-number">2.3.1. </span>Vertex shader<a class="headerlink" href="#vertex-shader" title="Permalink to this heading">#</a></h3>
<p>Click on <strong>File &gt; New &gt; File…</strong> (or just press CTRL + N) and select text file. Enter the following program into the new file and save it in the <code class="docutils literal notranslate"><span class="pre">Lab02_Basic_shapes/source</span></code> folder using the filename <code class="docutils literal notranslate"><span class="pre">simpleVertexShader.vert</span></code> (the file extension doesn’t matter but it is common to use <code class="docutils literal notranslate"><span class="pre">.vert</span></code> to denote the vertex shader).</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Make sure the file is saved with the correct file extension, i.e., <code class="docutils literal notranslate"><span class="pre">simpleVertexShader.vert</span></code> and not something like <code class="docutils literal notranslate"><span class="pre">simpleVertexShader.vert.txt</span></code> else the shader program will not be able to find the vertex shader.</p>
</div>
<div class="highlight-glsl notranslate"><div class="highlight"><pre><span></span><span class="cp">#version 330 core</span>

<span class="k">layout</span><span class="p">(</span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mo">0</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">vec3</span><span class="w"> </span><span class="n">position</span><span class="p">;</span>

<span class="kt">void</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="w"> </span>
<span class="p">{</span>
<span class="w">    </span><span class="nb">gl_Position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">vec4</span><span class="p">(</span><span class="n">position</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This is the GLSL program for a simple vertex shader. It takes in a single 3-element vector <code class="docutils literal notranslate"><span class="pre">position</span></code> that contains the (x,y,z) co-ordinates of a vertex and outputs the 4-element vector <code class="docutils literal notranslate"><span class="pre">gl_Position</span></code> containing the co-ordinates. The individual elements of a vector in GLSL can be accessed using <code class="docutils literal notranslate"><span class="pre">&lt;vector</span> <span class="pre">name&gt;.x</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;vector</span> <span class="pre">name&gt;.y</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;vector</span> <span class="pre">name&gt;.z</span></code> so we could have used the following instead.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">gl_Position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vec4</span><span class="p">(</span><span class="n">position</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="p">.</span><span class="n">z</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">)</span>
</pre></div>
</div>
<p>You may be wondering why we have this additional element <code class="docutils literal notranslate"><span class="pre">1.0</span></code>, don’t worry about this for now, it will be explained <a class="reference internal" href="05_transformations.html#translation-section"><span class="std std-ref">later on</span></a>.</p>
</section>
<section id="fragment-shader">
<h3><span class="section-number">2.3.2. </span>Fragment shader<a class="headerlink" href="#fragment-shader" title="Permalink to this heading">#</a></h3>
<p>Create a new file as you did with the vertex shader but with the following code and save it using the filename <code class="docutils literal notranslate"><span class="pre">simpleFragmentShader.frag</span></code> (again, makes sure the file has the correct extension).</p>
<div class="highlight-glsl notranslate"><div class="highlight"><pre><span></span><span class="cp">#version 330 core</span>

<span class="c1">// Output data</span>
<span class="k">out</span><span class="w"> </span><span class="kt">vec4</span><span class="w"> </span><span class="n">colour</span><span class="p">;</span>

<span class="kt">void</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="w"> </span>
<span class="p">{</span>
<span class="w">    </span><span class="n">colour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">vec4</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span><span class="w">    </span><span class="c1">// RGBA</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This fragment shader outputs a single 4-element vector called <code class="docutils literal notranslate"><span class="pre">colour</span></code> which defines the colour of the fragment using RGBA which stands for Red-Green-Blue-Alpha. The values are in the range 0 to 1 and so here we have red = 1, blue = 0, green = 0 so our pixel (and all pixels in the triangle) will be rendered in red with an Alpha value of 1 which means it is fully opaque.</p>
</section>
<section id="shader-program">
<h3><span class="section-number">2.3.3. </span>Shader program<a class="headerlink" href="#shader-program" title="Permalink to this heading">#</a></h3>
<p>We now need to combine the vertex and fragment shaders into a single shader program. To do this we are going use the function <code class="docutils literal notranslate"><span class="pre">LoadShaders()</span></code> written by contributors of <a href = "https://www.opengl-tutorial.org" target="_blank">opengl-tutorial.org</a>. The header and code files are already in the <code class="docutils literal notranslate"><span class="pre">source/</span></code> folder and the <code class="docutils literal notranslate"><span class="pre">shader</span></code> class has been included at the top of the <code class="docutils literal notranslate"><span class="pre">main.cpp</span></code> file.</p>
<p>We can now compile the shader program using the <code class="docutils literal notranslate"><span class="pre">LoadShaders()</span></code> function.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Compile shader program</span>
<span class="n">GLuint</span><span class="w"> </span><span class="n">shaderID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LoadShaders</span><span class="p">(</span><span class="s">&quot;simpleVertexShader.vert&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;simpleFragmentShader.frag&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>This code creates a program object which will be referred to by <code class="docutils literal notranslate"><span class="pre">shaderID</span></code>. The code for the <code class="docutils literal notranslate"><span class="pre">LoadShaders()</span></code> function can be seen in the <code class="docutils literal notranslate"><span class="pre">shaders.cpp</span></code> file (we aren’t really concerned with this but it’s nice to know what’s going on).</p>
<p>After you have created the shader files the basic structure of your <code class="docutils literal notranslate"><span class="pre">Lab02_Basic_shapes/</span></code> folder should resemble the following.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Lab02_Basic_shapes/
├── build
├── external/
│   ├── glew
│   └── glfw
└── source/
    ├── main.cpp
    ├── shader.hpp
    ├── shader.cpp
    ├── simpleVertexShader.vert
    └── simpleFragmentShader.frag
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="draw-the-triangle">
<h2><span class="section-number">2.4. </span>Draw the triangle<a class="headerlink" href="#draw-the-triangle" title="Permalink to this heading">#</a></h2>
<p>Finally, we can now draw the triangle. After clearing the window, we need to instruct OpenGL to use our shader program so enter the following code (this can be anywhere after the shader program has been compiled but before the do/while loop).</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Use the shader program</span>
<span class="n">glUseProgram</span><span class="p">(</span><span class="n">shaderID</span><span class="p">);</span>
</pre></div>
</div>
<p>Now we need to bind the vertex buffer to the VAO to send all of the data to the shaders for OpenGL to interpret. In the do/while loop add the following code after the window has been cleared.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Send the vertex buffer to the shaders</span>
<span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span><span class="w"> </span><span class="n">vertexBuffer</span><span class="p">);</span>
<span class="n">glVertexAttribPointer</span><span class="p">(</span>
<span class="w">                      </span><span class="mi">0</span><span class="p">,</span><span class="w">           </span><span class="c1">// attribute</span>
<span class="w">                      </span><span class="mi">3</span><span class="p">,</span><span class="w">           </span><span class="c1">// size</span>
<span class="w">                      </span><span class="n">GL_FLOAT</span><span class="p">,</span><span class="w">    </span><span class="c1">// type</span>
<span class="w">                      </span><span class="n">GL_FALSE</span><span class="p">,</span><span class="w">    </span><span class="c1">// normalise</span>
<span class="w">                      </span><span class="mi">0</span><span class="p">,</span><span class="w">           </span><span class="c1">// stride</span>
<span class="w">                      </span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="mi">0</span><span class="w">     </span><span class="c1">// offset</span>
<span class="w">                      </span><span class="p">);</span>
</pre></div>
</div>
<p>The three functions we’ve used here are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">glEnableVertexAttribArray()</span></code> enables a generic vertex array so we can pass our triangle data to OpenGL;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glBindBuffer()</span></code> binds our vertex buffer to OpenGL;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glVertexAttribPointer()</span></code> tells OpenGL how to interpret the data we are sending it. The input arguments are explained below.</p></li>
</ul>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Argument</p></th>
<th class="head text-left"><p>Explanation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>Attribute</p></td>
<td class="text-left"><p>A number that defines which vertex attribute we want to configure. In the vertex shader we used <code class="docutils literal notranslate"><span class="pre">location</span> <span class="pre">=</span> <span class="pre">0</span></code> for the vertex co-ordinates and since we are passing vertex co-ordinates, we set the attribute to 0.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>Size</p></td>
<td class="text-left"><p>How many values does the vertex attribute have. Here we have (x,y,z) co-ordinates so this is 3.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>Type</p></td>
<td class="text-left"><p>Our co-ordinates are floats.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>Normalise</p></td>
<td class="text-left"><p>We have already set out vertex co-ordinates in NDC (i.e., in the range -1 to 1) so we set this to false.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>Stride</p></td>
<td class="text-left"><p>The space between consecutive vertex attributes. Here one vertex immediately follows the next, so this is zero.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>Offset</p></td>
<td class="text-left"><p>Where does the first data point appear in the buffer? For us this is at the beginning, so we set it to 0.</p></td>
</tr>
</tbody>
</table>
<p>Now we instruct OpenGL to draw the triangle.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Draw the triangle</span>
<span class="n">glDrawArrays</span><span class="p">(</span><span class="n">GL_TRIANGLES</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>
<span class="n">glDisableVertexAttribArray</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">glDrawArrays()</span></code> command tells OpenGL that we wish to draw triangles, the <code class="docutils literal notranslate"><span class="pre">0</span></code> specifies that the first vertex starts at the 0 index in the buffer and the <code class="docutils literal notranslate"><span class="pre">3</span></code> specifies the number of vertices we want to draw. Since we no longer need the vertex attribute array, we disable it using <code class="docutils literal notranslate"><span class="pre">glDisableVertexAttribArray()</span></code>.</p>
<p>Don’t get too excited just yet. As good programmers we should clean up after ourselves and not leave bits of data lying around. After the close of the do/while loop we de-allocate the vertex and buffer objects as well as deleting the shader program.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Cleanup</span>
<span class="n">glDeleteBuffers</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">vertexBuffer</span><span class="p">);</span>
<span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">VAO</span><span class="p">);</span>
<span class="n">glDeleteProgram</span><span class="p">(</span><span class="n">shaderID</span><span class="p">);</span>
</pre></div>
</div>
<p>Compile and run your program. After all the syntax errors and bugs have been resolved (unless you are very lucky there will be at least one) you should be presented with a window within which is your red triangle that you have created. Note that the window shown below no longer has the title “Hello Window”, can you change your code so that your window has the title “Hello Triangle”?</p>
<figure class="align-default" id="id3">
<a class="reference internal image-reference" href="../_images/02_hello_triangle.png"><img alt="../_images/02_hello_triangle.png" src="../_images/02_hello_triangle.png" style="width: 500px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 2.3 </span><span class="caption-text">The “hello triangle” example</span><a class="headerlink" href="#id3" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>If you are having trouble getting to this stage, the code for producing this triangle is given <a class="reference download internal" download="" href="../_downloads/7b2a63641ddace2efa26088817979ebe/main.cpp"><span class="xref download myst">here</span></a>.</p>
</section>
<hr class="docutils" />
<section id="more-colours">
<h2><span class="section-number">2.5. </span>More colours<a class="headerlink" href="#more-colours" title="Permalink to this heading">#</a></h2>
<p>After basking in the glory of your achievements for a few minutes the initial excitement may begin to wane, and your natural curiosity will cause you to wonder whether we can use more than one colour. Well of course, all we need to do is tell OpenGL what colours we want to use for each vertex.</p>
<p>Create an array of float that contains the RGB colour data for each vertex.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define vertex colours</span>
<span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">GLfloat</span><span class="w"> </span><span class="n">colours</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// R   G     B</span>
<span class="w">    </span><span class="mf">1.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span><span class="w">    </span><span class="c1">// red</span>
<span class="w">    </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span><span class="w">    </span><span class="c1">// green</span>
<span class="w">    </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0f</span><span class="p">,</span><span class="w">    </span><span class="c1">// blue</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Here we have assigned the colour red to the first (bottom-left) vertex, green to the second (bottom-right) vertex and blue to the third (top) vertex.</p>
<p>Like the vertex buffer, we need to create and bind a buffer for the colours.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Create colour buffer</span>
<span class="n">GLuint</span><span class="w"> </span><span class="n">colourBuffer</span><span class="p">;</span>
<span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">colourBuffer</span><span class="p">);</span>
<span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span><span class="w"> </span><span class="n">colourBuffer</span><span class="p">);</span>
<span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">colours</span><span class="p">),</span><span class="w"> </span><span class="n">colours</span><span class="p">,</span><span class="w"> </span><span class="n">GL_STATIC_DRAW</span><span class="p">);</span>
</pre></div>
</div>
<p>And where we draw the triangle, we also need to bind the colour information to the VAO so it can be sent to the shaders.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Send colours to the shaders</span>
<span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span><span class="w"> </span><span class="n">colourBuffer</span><span class="p">);</span>
<span class="n">glVertexAttribPointer</span><span class="p">(</span>
<span class="w">                      </span><span class="mi">1</span><span class="p">,</span><span class="w">           </span><span class="c1">// attribute</span>
<span class="w">                      </span><span class="mi">3</span><span class="p">,</span><span class="w">           </span><span class="c1">// size</span>
<span class="w">                      </span><span class="n">GL_FLOAT</span><span class="p">,</span><span class="w">    </span><span class="c1">// type</span>
<span class="w">                      </span><span class="n">GL_FALSE</span><span class="p">,</span><span class="w">    </span><span class="c1">// normalise</span>
<span class="w">                      </span><span class="mi">0</span><span class="p">,</span><span class="w">           </span><span class="c1">// stride</span>
<span class="w">                      </span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="mi">0</span><span class="w">     </span><span class="c1">// offset</span>
<span class="w">                      </span><span class="p">);</span>
</pre></div>
</div>
<p>If you were to compile and run your program, you might be a little disappointed as your triangle is still red. Well of course, we haven’t told our shaders how to handle colours! Since our colours are associated with the vertices we need to modify the vertex shader to include the colours.</p>
<div class="highlight-glsl notranslate"><div class="highlight"><pre><span></span><span class="cp">#version 330 core</span>

<span class="c1">// Input vertex data</span>
<span class="k">layout</span><span class="p">(</span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mo">0</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">vec3</span><span class="w"> </span><span class="n">position</span><span class="p">;</span>
<span class="k">layout</span><span class="p">(</span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">vec3</span><span class="w"> </span><span class="n">colour</span><span class="p">;</span>

<span class="c1">// Output data</span>
<span class="k">out</span><span class="w"> </span><span class="kt">vec3</span><span class="w"> </span><span class="n">vertexColour</span><span class="p">;</span>

<span class="kt">void</span><span class="w"> </span><span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// Output vertex position</span>
<span class="w">    </span><span class="nb">gl_Position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">vec4</span><span class="p">(</span><span class="n">position</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1">// Output vertex colour</span>
<span class="w">    </span><span class="n">vertexColour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">colour</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Here our vertex shader is a little more sophisticated than before. We’ve added another attribute with <code class="docutils literal notranslate"><span class="pre">location</span> <span class="pre">=</span> <span class="pre">1</span></code> for the colour data which is a 3-element vector. Also, since we need to pass the colour data to the fragment shader we need to output it from the vertex shader (the vertex data is outputted automatically in <code class="docutils literal notranslate"><span class="pre">gl_Position</span></code>).</p>
<p>The changes to the fragment shader are just the addition of the colour input.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#version 330 core</span>

<span class="c1">// Input data</span>
<span class="n">in</span><span class="w"> </span><span class="n">vec3</span><span class="w"> </span><span class="n">vertexColour</span><span class="p">;</span>

<span class="c1">// Output data</span>
<span class="n">out</span><span class="w"> </span><span class="n">vec4</span><span class="w"> </span><span class="n">colour</span><span class="p">;</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span>
<span class="p">{</span>
<span class="w">    </span><span class="n">colour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vec4</span><span class="p">(</span><span class="n">vertexColour</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span><span class="w">    </span><span class="c1">// rgba</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Compile and run your program and if everything has gone to plan you should be presented with your new triangle in all its colourful snazzy goodness. Notice how the pixels in between the three vertex pixels have been shaded a colour which are combinations of the three vertex colours red, green and blue. OpenGL has interpolated the colours across the triangle.</p>
<figure class="align-default" id="id4">
<a class="reference internal image-reference" href="../_images/02_hello_snazzy_triangle.png"><img alt="../_images/02_hello_snazzy_triangle.png" src="../_images/02_hello_snazzy_triangle.png" style="width: 500px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 2.4 </span><span class="caption-text">Our snazzy triangle.</span><a class="headerlink" href="#id4" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<hr class="docutils" />
<section id="adding-another-triangle">
<h2><span class="section-number">2.6. </span>Adding another triangle<a class="headerlink" href="#adding-another-triangle" title="Permalink to this heading">#</a></h2>
<p>What could be better than one triangle? Well two triangles of course. Fortunately since we have done all of the grunt work in setting up the buffers for a single triangle adding another is a simple matter of defining the vertex co-ordinates and vertex colours for the additional triangle. Modify the <code class="docutils literal notranslate"><span class="pre">vertices[]</span></code> and <code class="docutils literal notranslate"><span class="pre">colours[]</span></code> arrays to the following.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define vertices</span>
<span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">GLfloat</span><span class="w"> </span><span class="n">vertices</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="mf">-0.9f</span><span class="p">,</span><span class="w"> </span><span class="mf">-0.5f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span><span class="w">    </span><span class="c1">// triangle 1</span>
<span class="w">    </span><span class="mf">-0.1f</span><span class="p">,</span><span class="w"> </span><span class="mf">-0.5f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span>
<span class="w">    </span><span class="mf">-0.5f</span><span class="p">,</span><span class="w">  </span><span class="mf">0.5f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span>
<span class="w">     </span><span class="mf">0.1f</span><span class="p">,</span><span class="w"> </span><span class="mf">-0.5f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span><span class="w">    </span><span class="c1">// triangle 2</span>
<span class="w">     </span><span class="mf">0.9f</span><span class="p">,</span><span class="w"> </span><span class="mf">-0.5f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span>
<span class="w">     </span><span class="mf">0.5f</span><span class="p">,</span><span class="w">  </span><span class="mf">0.5f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span>
<span class="p">};</span>

<span class="c1">// Define colours</span>
<span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">GLfloat</span><span class="w"> </span><span class="n">colours</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="mf">1.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span><span class="w">    </span><span class="c1">// red</span>
<span class="w">    </span><span class="mf">1.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span>
<span class="w">    </span><span class="mf">1.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span>
<span class="w">    </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0f</span><span class="p">,</span><span class="w">    </span><span class="c1">// blue</span>
<span class="w">    </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0f</span><span class="p">,</span>
<span class="w">    </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0f</span><span class="p">,</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Here the <code class="docutils literal notranslate"><span class="pre">vertices[]</span></code> array now defines six vertices for two triangles placed side-by-side. The <code class="docutils literal notranslate"><span class="pre">colours[]</span></code> array defines the first three vertices red and the second three set of vertices blue.</p>
<p>We also need to instruct OpenGL to draw two triangles instead of one. To do this we change the number of vertices we want to draw from <code class="docutils literal notranslate"><span class="pre">3</span></code> to the number of vertices we have. Since each vertex has 3 co-ordinates (x, y, z) and each co-ordinate is a single <code class="docutils literal notranslate"><span class="pre">GLfloat</span></code> then we can calculate the number of vertices we have by dividing <code class="docutils literal notranslate"><span class="pre">sizeof(vertices)</span></code> by <code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">*</span> <span class="pre">sizeof(GLfloat)</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Draw the triangles</span>
<span class="n">glDrawArrays</span><span class="p">(</span><span class="n">GL_TRIANGLES</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">GLfloat</span><span class="p">)));</span>
</pre></div>
</div>
<p>Compiling and running the executable results in the following.</p>
<figure class="align-default" id="id5">
<a class="reference internal image-reference" href="../_images/02_two_triangles.png"><img alt="../_images/02_two_triangles.png" src="../_images/02_two_triangles.png" style="width: 500px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 2.5 </span><span class="caption-text">Two triangles</span><a class="headerlink" href="#id5" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<hr class="docutils" />
<section id="exercises">
<h2><span class="section-number">2.7. </span>Exercises<a class="headerlink" href="#exercises" title="Permalink to this heading">#</a></h2>
<p>Now that you’ve got to the stage where you can draw triangles to the screen and alter the colours lets see if you can do the following.</p>
<ol class="arabic">
<li><p>Draw the original triangle but alter the vertex shader to achieve the following results:</p>
<p>(a) the triangle is shifted by 0.5 to the right; <br>
(b) the triangle is drawn upside-down;<br>
(c) the triangle x and y co-ordinates are swapped.</p>
</li>
</ol>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 docutils">
<div class="sd-row docutils">
<div class="sd-col sd-d-flex-column docutils">
<figure class="align-default">
<img alt="../_images/02_Ex1a.png" src="../_images/02_Ex1a.png" />
</figure>
</div>
<div class="sd-col sd-d-flex-column docutils">
<figure class="align-default">
<img alt="../_images/02_Ex1b.png" src="../_images/02_Ex1b.png" />
</figure>
</div>
<div class="sd-col sd-d-flex-column docutils">
<figure class="align-default">
<img alt="../_images/02_Ex1c.png" src="../_images/02_Ex1c.png" />
</figure>
</div>
</div>
</div>
<ol class="arabic simple" start="2">
<li><p>Use two triangles to draw a green rectangle where the lower-left corner has co-ordinates (-0.5, -0.5, 0.0) and the upper-right corner has co-ordinates (0.5, 0.5, 0.0).</p></li>
</ol>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/02_Ex2.png"><img alt="../_images/02_Ex2.png" src="../_images/02_Ex2.png" style="width: 500px;" /></a>
</figure>
<ol class="arabic simple" start="3">
<li><p>Use six different coloured triangles to draw a hexagon.</p></li>
</ol>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/02_Ex3.png"><img alt="../_images/02_Ex3.png" src="../_images/02_Ex3.png" style="width: 500px;" /></a>
</figure>
</section>
<section id="source-code">
<h2><span class="section-number">2.8. </span>Source code<a class="headerlink" href="#source-code" title="Permalink to this heading">#</a></h2>
<p>The source code for this lab, including the exercise solutions, can be downloaded using the links below.</p>
<ul class="simple">
<li><p>Hello triangle: <a class="reference download internal" download="" href="../_downloads/7b2a63641ddace2efa26088817979ebe/main.cpp"><span class="xref download myst">main.cpp</span></a>, <a class="reference download internal" download="" href="../_downloads/6755b9f63ab704ca4607ed0590f93e98/simpleVertexShader.vert"><span class="xref download myst">simpleVertexShader.vert</span></a>, <a class="reference download internal" download="" href="../_downloads/de8a8c0022c3862148b352dd15e19289/simpleFragmentShader.frag"><span class="xref download myst">simpleFragmentShader.frag</span></a></p></li>
<li><p>Colour shaders: <a class="reference download internal" download="" href="../_downloads/7bd3cc953a6ec5b4ce3130ee9a7ef3c2/colourVertexShader.vert"><span class="xref download myst">colourVertexShader</span></a>, <a class="reference download internal" download="" href="../_downloads/9623cb793dbbb78cb54571df06336438/colourFragmentShader.frag"><span class="xref download myst">colourFragmentShader.frag</span></a></p></li>
<li><p>Exercise solutions: <a class="reference download internal" download="" href="../_downloads/ae2ac9df8be4aac7ad1f7f519f17b014/Lab02_solutions.cpp"><span class="xref download myst">main.cpp</span></a>, <a class="reference download internal" download="" href="../_downloads/7f102865f14449116505edc626817121/ex1VertexShader.vert"><span class="xref download myst">ex1VertexShader.vert</span></a></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="video-walkthrough">
<h2><span class="section-number">2.9. </span>Video walkthrough<a class="headerlink" href="#video-walkthrough" title="Permalink to this heading">#</a></h2>
<p>The video below walks you through these lab materials.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/tsokaomZfZY?si=zAKqb8nZZ5BGdfW0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe></section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./pages"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="01_intro_to_cpp.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">1. </span>Introduction to C++</p>
      </div>
    </a>
    <a class="right-next"
       href="03_textures.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">3. </span>Textures</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hello-window">2.1. Hello window</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#define-a-triangle">2.2. Define a triangle</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#write-and-compile-the-shader">2.3. Write and compile the shader</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#vertex-shader">2.3.1. Vertex shader</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fragment-shader">2.3.2. Fragment shader</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#shader-program">2.3.3. Shader program</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#draw-the-triangle">2.4. Draw the triangle</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#more-colours">2.5. More colours</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-another-triangle">2.6. Adding another triangle</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercises">2.7. Exercises</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#source-code">2.8. Source code</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#video-walkthrough">2.9. Video walkthrough</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Dr Jon Shiach
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>